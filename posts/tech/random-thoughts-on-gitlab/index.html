<!DOCTYPE html>
<html lang='en' class="js csstransforms3d">
  <head>
    <title>Thuyen&#39;s corner</title>
<link rel="icon" href="/favicon.png" type="image/png">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:title" content="Tản mạn: chuyện Gitlab" />
<meta property="og:description" content="1 Khi mình join team, công ty mình host các projects trên Github. Một dev mới vào công ty sẽ được add tài khoản Github cá nhân mình vào tài khoản organization của công ty. Lúc ấy, trên Github profile của bạn sẽ hiển thị membership với công ty (bạn phải public cái membership thì người khác mới thấy được nha). Nếu bạn làm cho công ty nào ok, hoặc thuộc dạng top-notch trong nước/khu vực, thì Github profile của bạn sẽ có-vẻ đẹp hơn một tí." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://trinhngocthuyen.com/posts/tech/random-thoughts-on-gitlab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-02-02T00:00:00+00:00" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
<link rel="stylesheet" href="/sass/main.1081a7f7ad055e14f14092b4eb8c0c03bf8efb5d3e5121db581f7f63da63d795.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://kit.fontawesome.com/b0896cba62.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-VWZ70X3N46"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-VWZ70X3N46', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="" data-url="/posts/tech/random-thoughts-on-gitlab/">
    <nav role="navigation">
  <header class="banner">
    <h1 class="logo">
      <a href="/"><span class="first">🏠 THUYEN's</span> <span class="second">corner</span></a>
    </h1>
    <div id="menu-toggle" class="menu-toggle">
      <svg class="icon"  viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true">
        <line x1="0" y1="50%" x2="100%" y2="50%"/>
        <line x1="0" y1="50%" x2="100%" y2="50%"/>
        <line x1="0" y1="50%" x2="100%" y2="50%"/>
      </svg>
    </div>
  </header>
  <ul class="menu-items">
    <li class="menu-item"><a href="/posts/tech">Tech Blog</a></li>
    <li class="menu-item"><a href="/posts/misc">Tạp Bút</a></li>
    <li class="menu-item"><a href="/featured">Featured</a></li>
    <li class="menu-item"><a href="/projects">Projects</a></li>
    <li class="menu-item"><a href="/about">About</a></li>
  </ul>
</nav>

<script src="/scripts/menu.js"></script>
    <main role="main">
<div class="page-wrapper">
<article class="page">
  <header>
  
  <h1>Tản mạn: chuyện Gitlab</h1>
  
  
  <div class="metadata">
  <span>2020, Feb 2</span>
</div>
  
</header>
  <p><span class="point">1</span> Khi mình join team, công ty mình host các projects trên Github. Một dev mới vào công ty sẽ được add tài khoản Github cá nhân mình vào tài khoản organization của công ty.
Lúc ấy, trên Github profile của bạn sẽ hiển thị membership với công ty (bạn phải public cái membership thì người khác mới thấy được nha). Nếu bạn làm cho công ty nào ok, hoặc thuộc dạng top-notch trong nước/khu vực, thì Github profile của bạn sẽ có-vẻ đẹp hơn một tí.</p>
<p>Ngoài ra, cái biểu đồ contribution trên Github cá nhân của bạn nhìn sẽ xanh xanh, đẹp hơn chút. Nhớ vào <em>contribution settings</em> chỉnh để tính luôn cả <em>private contributions</em> (tức là contribution vào các <em>private repo</em>) nha. Dưới đây là <a href="https://github.com/trinhngocthuyen?tab=overview&amp;from=2018-01-01&amp;to=2018-12-31">contribution của mình trong năm 2018</a>:
<img src="/images/misc/github-contribution-2018.png"/></p>
<p>Như bạn thấy đấy, thứ 7 cũng có màu xanh xanh nha, thấy làm việc cần mẫn chưa 😆!? Mình join công ty là cuối tháng 2, đến cuối tháng 8 là hết probation (ừm, probation có 6 tháng chớ mấy 😜). Xong tới cuối tháng 9 thì mấy ô xanh vơi hết. Hổng phải do pass probation rồi nên mình phè phỡn đâu mọi người. Lúc này là thời điểm migrate sang Gitlab xong. Team vẫn  miệt mài push code và đi review code&hellip; nhưng trên Gitlab. Vì Gitlab công ty xài là self-hosted domain, cần VPN để truy cập, và mỗi người xài theo email account của công ty; nên ai cũng mong là <em>&ldquo;con ong làm mật yêu hoa&rdquo;</em>, chứ không kỳ vọng sẽ để lại dấu ấn trên public profile. Sau khi migrate sang Gitlab thì <a href="https://github.com/trinhngocthuyen?tab=overview&amp;from=2019-01-01&amp;to=2019-12-31">contributions của mình trong năm 2019</a> như thế này đây 😂:
<img src="/images/misc/github-contribution-2019.png"/></p>
<p><span class="point">2</span> Là một Github user, mới đầu chuyển sang dùng Gitlab mình thấy rất khó chịu vì cái UI/UX của nó. Cho đến thời điểm hiện tại, mình đã bớt khó chịu hơn. Tuy nhiên, cá nhân mình nghĩ là nó có thể làm tốt hơn. Lấy ví dụ về <strong>call to action (CTA)</strong> giữa Github và Gitlab:</p>
<ul>
<li>Đối với mình, thiết kế của Github có <em>call to action</em> rất rõ ràng. Ví dụ, khi bạn review 1 cái <em>pull request (PR)</em> của người khác, ngoài việc để lại comment trên code của người ta, hành động sau chót thường là <em>approve PR</em> hoặc <em>request changes</em>. Cái nút <strong>&ldquo;Review changes&rdquo;</strong> màu xanh lè nằm ở góc phải, vẫn cố định (sticky) ở đó khi scroll xuống, rất tiện lợi cho cả 2 chức năng trên vì có độ chú ý cao.
<img src="/images/misc/github-cta-review-changes.png"/></li>
<li>Khi mới đầu chuyển sang Gitlab, mình gặp 3 khó khăn chính:
<ul>
<li><em>Không kiếm ra cái nút để approve merge request (MR)</em>: nhiều thông tin quá 😞. Mà mấy cái nút này nó không có cố định (sticky) khi scroll nên kéo lên kéo xuống một hồi là phải đi kiếm lại cái nút.</li>
<li><em>Cái nút để approve 1 cái merge request nó thay đổi trạng thái hoài</em>: Lúc chưa có ai approve thì nó có màu nền xanh dương; còn lúc có người khác approve rồi thì nó nền trắng, viền xanh dương, ghi chữ <em>&ldquo;approve additionally&rdquo;</em>. Đứng dưới góc nhìn người dùng, mình méo quan tâm là &ldquo;additionally&rdquo; hay không. Mình chỉ muốn approve cái merge request và muốn đảm bảo là mình đã bấm đúng nút.
<img src="/images/misc/gitlab-cta-states.png"/></li>
<li><em>Nhấn nhầm nút</em>: khi đã có người approve MR rồi, cái nút approve nó chuyển sang nền trắng viền xanh, còn cái nút <em>merge</em> lúc đó có nền xanh lá cây. Lướt qua xung quanh thì cái nút <em>merge</em> đó là có CTA mạnh nhất. Mình theo thói quen, cứ đinh ninh cái nút xanh xanh là cái nút approve. Nhấn cái phập, thế là merge cái MR của người ta luôn 😂. Cái này mình bị 1-2 lần mới quen ak&hellip;<br>
&ldquo;Ba cái đồ cẩu thả&rdquo; - Ừm, mấy người cứ phán xét tui đi 👊. Nhưng làm theo quán tính mà bị sai như thế này ngụ ý rằng cái UX chưa được tự nhiên cho lắm.</li>
</ul>
</li>
</ul>
<p><span class="point">3</span> Điều mình khá hài lòng về Gitlab chính là CI/CD support. Bản thân mình thấy Gitlab CI/CD khá là xịn xò. Hồi trước khi project được host trên Github thì team xài Jenkins. Khi chuyển qua Gitlab thì thấy khả năng customization cao hơn hẳn. Mình cũng sẽ cho feedback tương tự khi so sánh giữa một bên thứ 3 như Bitrise và Gitlab. Mặc dù chưa dùng hết những tính năng của Gitlab CI/CD mình thấy cũng đã làm được đủ thứ rồi. Đấy là chưa kể do đặc thù platform (iOS) nên mình chưa khai thác nhiều tính năng &ldquo;thông dụng&rdquo; (vd. hổng xài được Docker flow cho mấy jobs liên quan đến iOS vì các tác vụ này chạy trên <code>darwin</code> kernel còn Docker thì yêu cầu <code>linux</code> kernel). Vì khả năng hỗ trợ cao của Gitlab CI/CD nên mình rất hay nghía mấy trang documentation của mấy bản. Trang mà mình hay tới lui nhất là <a href="https://docs.gitlab.com/ee/ci/yaml/">https://docs.gitlab.com/ee/ci/yaml/</a>. Lâu lâu coi xem bản release mới của Gitlab có cái nào hay.</p>
<p><span class="point">4</span> Nói về preferences về CI/CD setup thì cũng có 2 trường phái chính:</p>
<ul>
<li>Trường phái thứ nhất thích những setup dạng <em>kéo thả</em> (drag-and-drop). Thường sẽ có 1 cái web interface để config workflow. Ví dụ đối với iOS thì nhập upload cái certificate và provisioning profiles lên cái web đó,rồi nhập cái build configuration vào là <code>Debug</code> hay <code>Release</code>&hellip;</li>
<li>Trường phái thứ nhì thích những setup đòi hỏi mình phải định nghĩa workflow bằng code mà không có web interface kéo thả như trên. Thường với những trường hợp này cần viết thêm tí xíu code.</li>
</ul>
<p>Cái này cũng tương tự như 2 trường phái mần UI trong iOS: bằng <em>code thuần</em> hay bằng <em>interface builder</em> (tức storyboard/xib). Vấn đề tương tự nên câu trả lời cho câu hỏi &ldquo;chọn cái nào bây giờ?&rdquo; cũng tương tự: <em>tuỳ quy mô dự án, quy mô team, yêu cầu phần mềm&hellip;</em>. Riêng mình, mặc dù không chê bai hay phán xét trường phái nào nhưng mình có xu hướng theo trường phái thứ nhì. Vì sao? Vì code như vậy đem lại cho mình cảm giác là mình đang chơi với nó hơn&hellip; Và với code thì dễ customize hơn, dễ <span class="change from">cheat</span><span class="change to"> hack</span> hơn.</p>
<p>&hellip;</p>
<p>Thôi tản mạn đến đây thôi&hellip; Về CI/CD (cho iOS) thì sẽ có những bài viết khác.</p>

  <div class="entry footer">
  <div>
    
<div class="categories">
  <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
</svg>

  <a href="/categories/tech" class="category">tech</a>
</div>
    
<div class="tags">
  <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
</svg>

  <a href="/tags/ci" class="tag">ci</a>
</div>
  </div>
  <div class='nav'><div class='prev-entry'>
    <a href='/posts/tech/random-thoughts-on-being-a-ci-engineer/'>Random thoughts on being a CI engineer</a>
  </div><div class='next-entry'>
    <a href='/posts/tech/when-cicd-config-is-not-just-a-file-or-a-dashboard/'>When iOS CI/CD Config is not Just a File or a Dashboard</a>
  </div></div>
  
</div>
  
<section class='actions'>
  <div class="container facebook">
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v17.0"></script>
<div class="share">
  <div class="fb-like" data-href="https://trinhngocthuyen.com/posts/tech/random-thoughts-on-gitlab/" data-width="" data-layout="standard" data-action="like" data-share="true"></div>
</div>
</div>
  <div class="container sponsor">
<p>Like what you’re reading? Buy me a coffee and keep me going!</p>
<script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="trinhngocthuyen" data-color="#FFDD00" data-emoji=""  data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
</div>
  <div class="container subscription">
<p class="cta-desc"><i class="fa-regular fa-bell"></i> Subscribe to this substack<br>to stay updated with the latest content</p>
<div class="close"><i class="fa-solid fa-xmark"></i></div>
<iframe src="https://trinhngocthuyen.substack.com/embed" width="100%" height="300" style="border:none;" frameborder="0" scrolling="no"></iframe>
</div>
</section>
</article>
<script src="/scripts/toc.js"></script>
</div>
</main></body>
</html>