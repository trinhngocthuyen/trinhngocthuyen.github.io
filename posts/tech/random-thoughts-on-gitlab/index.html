<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta property="og:title" content="Táº£n máº¡n: chuyá»‡n Gitlab">
      <title>Thuyen&#39;s corner</title>
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
      
      <link rel="stylesheet" href="/sass/main.7c9da60ff2d0ede050060cc37446d405a6ebc67b1b72688fd9329eba535d7f72.css">

      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-69597239-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="" data-url="/posts/tech/random-thoughts-on-gitlab/">
    <nav role="navigation">
  <header role="banner">
    <h1 id="logo">
      <a href="/">Thuyen&#39;s corner</a>
    </h1>
  </header>
  <div id="menu-toggle" class="menu-toggle">
    <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
    <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
  </div>
  <ul>
    
    <li><a href="/posts/tech">Tech</a></li>
    
    <li><a href="/posts/misc">Misc (Táº¡p bÃºt)</a></li>
    
    <li><a href="/about">About</a></li>
    
  </ul>
</nav>

<script src="/scripts/menu.js"></script>
    <main role="main">
<article class="page">
  <header>
  
  <h1>Táº£n máº¡n: chuyá»‡n Gitlab</h1>
  
  
  <div class="metadata">
  <span>2020, Feb 2</span>
</div>
  
</header>
  <p><span class="point">1</span> Khi mÃ¬nh join team, cÃ´ng ty mÃ¬nh host cÃ¡c projects trÃªn Github. Má»™t dev má»›i vÃ o cÃ´ng ty sáº½ Ä‘Æ°á»£c add tÃ i khoáº£n Github cÃ¡ nhÃ¢n mÃ¬nh vÃ o tÃ i khoáº£n organization cá»§a cÃ´ng ty.
LÃºc áº¥y, trÃªn Github profile cá»§a báº¡n sáº½ hiá»ƒn thá»‹ membership vá»›i cÃ´ng ty (báº¡n pháº£i public cÃ¡i membership thÃ¬ ngÆ°á»i khÃ¡c má»›i tháº¥y Ä‘Æ°á»£c nha). Náº¿u báº¡n lÃ m cho cÃ´ng ty nÃ o ok, hoáº·c thuá»™c dáº¡ng top-notch trong nÆ°á»›c/khu vá»±c, thÃ¬ Github profile cá»§a báº¡n sáº½ cÃ³-váº» Ä‘áº¹p hÆ¡n má»™t tÃ­.</p>
<p>NgoÃ i ra, cÃ¡i biá»ƒu Ä‘á»“ contribution trÃªn Github cÃ¡ nhÃ¢n cá»§a báº¡n nhÃ¬n sáº½ xanh xanh, Ä‘áº¹p hÆ¡n chÃºt. Nhá»› vÃ o <em>contribution settings</em> chá»‰nh Ä‘á»ƒ tÃ­nh luÃ´n cáº£ <em>private contributions</em> (tá»©c lÃ  contribution vÃ o cÃ¡c <em>private repo</em>) nha. DÆ°á»›i Ä‘Ã¢y lÃ  <a href="https://github.com/trinhngocthuyen?tab=overview&amp;from=2018-01-01&amp;to=2018-12-31">contribution cá»§a mÃ¬nh trong nÄƒm 2018</a>:
<img src="/images/misc/github-contribution-2018.png" alt="2018 contribution"></p>
<p>NhÆ° báº¡n tháº¥y Ä‘áº¥y, thá»© 7 cÅ©ng cÃ³ mÃ u xanh xanh nha, tháº¥y lÃ m viá»‡c cáº§n máº«n chÆ°a ğŸ˜†!? MÃ¬nh join cÃ´ng ty lÃ  cuá»‘i thÃ¡ng 2, Ä‘áº¿n cuá»‘i thÃ¡ng 8 lÃ  háº¿t probation (á»«m, probation cÃ³ 6 thÃ¡ng chá»› máº¥y ğŸ˜œ). Xong tá»›i cuá»‘i thÃ¡ng 9 thÃ¬ máº¥y Ã´ xanh vÆ¡i háº¿t. Há»•ng pháº£i do pass probation rá»“i nÃªn mÃ¬nh phÃ¨ phá»¡n Ä‘Ã¢u má»i ngÆ°á»i. LÃºc nÃ y lÃ  thá»i Ä‘iá»ƒm migrate sang Gitlab xong. Team váº«n  miá»‡t mÃ i push code vÃ  Ä‘i review code&hellip; nhÆ°ng trÃªn Gitlab. VÃ¬ Gitlab cÃ´ng ty xÃ i lÃ  self-hosted domain, cáº§n VPN Ä‘á»ƒ truy cáº­p, vÃ  má»—i ngÆ°á»i xÃ i theo email account cá»§a cÃ´ng ty; nÃªn ai cÅ©ng mong lÃ  <em>&ldquo;con ong lÃ m máº­t yÃªu hoa&rdquo;</em>, chá»© khÃ´ng ká»³ vá»ng sáº½ Ä‘á»ƒ láº¡i dáº¥u áº¥n trÃªn public profile. Sau khi migrate sang Gitlab thÃ¬ <a href="https://github.com/trinhngocthuyen?tab=overview&amp;from=2019-01-01&amp;to=2019-12-31">contributions cá»§a mÃ¬nh trong nÄƒm 2019</a> nhÆ° tháº¿ nÃ y Ä‘Ã¢y ğŸ˜‚:
<img src="/images/misc/github-contribution-2019.png" alt="2019 contribution"></p>
<p><span class="point">2</span> LÃ  má»™t Github user, má»›i Ä‘áº§u chuyá»ƒn sang dÃ¹ng Gitlab mÃ¬nh tháº¥y ráº¥t khÃ³ chá»‹u vÃ¬ cÃ¡i UI/UX cá»§a nÃ³. Cho Ä‘áº¿n thá»i Ä‘iá»ƒm hiá»‡n táº¡i, mÃ¬nh Ä‘Ã£ bá»›t khÃ³ chá»‹u hÆ¡n. Tuy nhiÃªn, cÃ¡ nhÃ¢n mÃ¬nh nghÄ© lÃ  nÃ³ cÃ³ thá»ƒ lÃ m tá»‘t hÆ¡n. Láº¥y vÃ­ dá»¥ vá» <strong>call to action (CTA)</strong> giá»¯a Github vÃ  Gitlab:</p>
<ul>
<li>Äá»‘i vá»›i mÃ¬nh, thiáº¿t káº¿ cá»§a Github cÃ³ <em>call to action</em> ráº¥t rÃµ rÃ ng. VÃ­ dá»¥, khi báº¡n review 1 cÃ¡i <em>pull request (PR)</em> cá»§a ngÆ°á»i khÃ¡c, ngoÃ i viá»‡c Ä‘á»ƒ láº¡i comment trÃªn code cá»§a ngÆ°á»i ta, hÃ nh Ä‘á»™ng sau chÃ³t thÆ°á»ng lÃ  <em>approve PR</em> hoáº·c <em>request changes</em>. CÃ¡i nÃºt <strong>&ldquo;Review changes&rdquo;</strong> mÃ u xanh lÃ¨ náº±m á»Ÿ gÃ³c pháº£i, váº«n cá»‘ Ä‘á»‹nh (sticky) á»Ÿ Ä‘Ã³ khi scroll xuá»‘ng, ráº¥t tiá»‡n lá»£i cho cáº£ 2 chá»©c nÄƒng trÃªn vÃ¬ cÃ³ Ä‘á»™ chÃº Ã½ cao.
<img src="/images/misc/github-cta-review-changes.png" alt="Github CTA"></li>
<li>Khi má»›i Ä‘áº§u chuyá»ƒn sang Gitlab, mÃ¬nh gáº·p 3 khÃ³ khÄƒn chÃ­nh:
<ul>
<li><em>KhÃ´ng kiáº¿m ra cÃ¡i nÃºt Ä‘á»ƒ approve merge request (MR)</em>: nhiá»u thÃ´ng tin quÃ¡ ğŸ˜. MÃ  máº¥y cÃ¡i nÃºt nÃ y nÃ³ khÃ´ng cÃ³ cá»‘ Ä‘á»‹nh (sticky) khi scroll nÃªn kÃ©o lÃªn kÃ©o xuá»‘ng má»™t há»“i lÃ  pháº£i Ä‘i kiáº¿m láº¡i cÃ¡i nÃºt.</li>
<li><em>CÃ¡i nÃºt Ä‘á»ƒ approve 1 cÃ¡i merge request nÃ³ thay Ä‘á»•i tráº¡ng thÃ¡i hoÃ i</em>: LÃºc chÆ°a cÃ³ ai approve thÃ¬ nÃ³ cÃ³ mÃ u ná»n xanh dÆ°Æ¡ng; cÃ²n lÃºc cÃ³ ngÆ°á»i khÃ¡c approve rá»“i thÃ¬ nÃ³ ná»n tráº¯ng, viá»n xanh dÆ°Æ¡ng, ghi chá»¯ <em>&ldquo;approve additionally&rdquo;</em>. Äá»©ng dÆ°á»›i gÃ³c nhÃ¬n ngÆ°á»i dÃ¹ng, mÃ¬nh mÃ©o quan tÃ¢m lÃ  &ldquo;additionally&rdquo; hay khÃ´ng. MÃ¬nh chá»‰ muá»‘n approve cÃ¡i merge request vÃ  muá»‘n Ä‘áº£m báº£o lÃ  mÃ¬nh Ä‘Ã£ báº¥m Ä‘Ãºng nÃºt.
<img src="/images/misc/gitlab-cta-states.png" alt="Gitlab CTA"></li>
<li><em>Nháº¥n nháº§m nÃºt</em>: khi Ä‘Ã£ cÃ³ ngÆ°á»i approve MR rá»“i, cÃ¡i nÃºt approve nÃ³ chuyá»ƒn sang ná»n tráº¯ng viá»n xanh, cÃ²n cÃ¡i nÃºt <em>merge</em> lÃºc Ä‘Ã³ cÃ³ ná»n xanh lÃ¡ cÃ¢y. LÆ°á»›t qua xung quanh thÃ¬ cÃ¡i nÃºt <em>merge</em> Ä‘Ã³ lÃ  cÃ³ CTA máº¡nh nháº¥t. MÃ¬nh theo thÃ³i quen, cá»© Ä‘inh ninh cÃ¡i nÃºt xanh xanh lÃ  cÃ¡i nÃºt approve. Nháº¥n cÃ¡i pháº­p, tháº¿ lÃ  merge cÃ¡i MR cá»§a ngÆ°á»i ta luÃ´n ğŸ˜‚. CÃ¡i nÃ y mÃ¬nh bá»‹ 1-2 láº§n má»›i quen ak&hellip;<br>
&ldquo;Ba cÃ¡i Ä‘á»“ cáº©u tháº£&rdquo; - á»ªm, máº¥y ngÆ°á»i cá»© phÃ¡n xÃ©t tui Ä‘i ğŸ‘Š. NhÆ°ng lÃ m theo quÃ¡n tÃ­nh mÃ  bá»‹ sai nhÆ° tháº¿ nÃ y ngá»¥ Ã½ ráº±ng cÃ¡i UX chÆ°a Ä‘Æ°á»£c tá»± nhiÃªn cho láº¯m.</li>
</ul>
</li>
</ul>
<p><span class="point">3</span> Äiá»u mÃ¬nh khÃ¡ hÃ i lÃ²ng vá» Gitlab chÃ­nh lÃ  CI/CD support. Báº£n thÃ¢n mÃ¬nh tháº¥y Gitlab CI/CD khÃ¡ lÃ  xá»‹n xÃ². Há»“i trÆ°á»›c khi project Ä‘Æ°á»£c host trÃªn Github thÃ¬ team xÃ i Jenkins. Khi chuyá»ƒn qua Gitlab thÃ¬ tháº¥y kháº£ nÄƒng customization cao hÆ¡n háº³n. MÃ¬nh cÅ©ng sáº½ cho feedback tÆ°Æ¡ng tá»± khi so sÃ¡nh giá»¯a má»™t bÃªn thá»© 3 nhÆ° Bitrise vÃ  Gitlab. Máº·c dÃ¹ chÆ°a dÃ¹ng háº¿t nhá»¯ng tÃ­nh nÄƒng cá»§a Gitlab CI/CD mÃ¬nh tháº¥y cÅ©ng Ä‘Ã£ lÃ m Ä‘Æ°á»£c Ä‘á»§ thá»© rá»“i. Äáº¥y lÃ  chÆ°a ká»ƒ do Ä‘áº·c thÃ¹ platform (iOS) nÃªn mÃ¬nh chÆ°a khai thÃ¡c nhiá»u tÃ­nh nÄƒng &ldquo;thÃ´ng dá»¥ng&rdquo; (vd. há»•ng xÃ i Ä‘Æ°á»£c Docker flow cho máº¥y jobs liÃªn quan Ä‘áº¿n iOS vÃ¬ cÃ¡c tÃ¡c vá»¥ nÃ y cháº¡y trÃªn <code>darwin</code> kernel cÃ²n Docker thÃ¬ yÃªu cáº§u <code>linux</code> kernel). VÃ¬ kháº£ nÄƒng há»— trá»£ cao cá»§a Gitlab CI/CD nÃªn mÃ¬nh ráº¥t hay nghÃ­a máº¥y trang documentation cá»§a máº¥y báº£n. Trang mÃ  mÃ¬nh hay tá»›i lui nháº¥t lÃ  <a href="https://docs.gitlab.com/ee/ci/yaml/">https://docs.gitlab.com/ee/ci/yaml/</a>. LÃ¢u lÃ¢u coi xem báº£n release má»›i cá»§a Gitlab cÃ³ cÃ¡i nÃ o hay.</p>
<p><span class="point">4</span> NÃ³i vá» preferences vá» CI/CD setup thÃ¬ cÅ©ng cÃ³ 2 trÆ°á»ng phÃ¡i chÃ­nh:</p>
<ul>
<li>TrÆ°á»ng phÃ¡i thá»© nháº¥t thÃ­ch nhá»¯ng setup dáº¡ng <em>kÃ©o tháº£</em> (drag-and-drop). ThÆ°á»ng sáº½ cÃ³ 1 cÃ¡i web interface Ä‘á»ƒ config workflow. VÃ­ dá»¥ Ä‘á»‘i vá»›i iOS thÃ¬ nháº­p upload cÃ¡i certificate vÃ  provisioning profiles lÃªn cÃ¡i web Ä‘Ã³,rá»“i nháº­p cÃ¡i build configuration vÃ o lÃ  <code>Debug</code> hay <code>Release</code>&hellip;</li>
<li>TrÆ°á»ng phÃ¡i thá»© nhÃ¬ thÃ­ch nhá»¯ng setup Ä‘Ã²i há»i mÃ¬nh pháº£i Ä‘á»‹nh nghÄ©a workflow báº±ng code mÃ  khÃ´ng cÃ³ web interface kÃ©o tháº£ nhÆ° trÃªn. ThÆ°á»ng vá»›i nhá»¯ng trÆ°á»ng há»£p nÃ y cáº§n viáº¿t thÃªm tÃ­ xÃ­u code.</li>
</ul>
<p>CÃ¡i nÃ y cÅ©ng tÆ°Æ¡ng tá»± nhÆ° 2 trÆ°á»ng phÃ¡i máº§n UI trong iOS: báº±ng <em>code thuáº§n</em> hay báº±ng <em>interface builder</em> (tá»©c storyboard/xib). Váº¥n Ä‘á» tÆ°Æ¡ng tá»± nÃªn cÃ¢u tráº£ lá»i cho cÃ¢u há»i &ldquo;chá»n cÃ¡i nÃ o bÃ¢y giá»?&rdquo; cÅ©ng tÆ°Æ¡ng tá»±: <em>tuá»³ quy mÃ´ dá»± Ã¡n, quy mÃ´ team, yÃªu cáº§u pháº§n má»m&hellip;</em>. RiÃªng mÃ¬nh, máº·c dÃ¹ khÃ´ng chÃª bai hay phÃ¡n xÃ©t trÆ°á»ng phÃ¡i nÃ o nhÆ°ng mÃ¬nh cÃ³ xu hÆ°á»›ng theo trÆ°á»ng phÃ¡i thá»© nhÃ¬. VÃ¬ sao? VÃ¬ code nhÆ° váº­y Ä‘em láº¡i cho mÃ¬nh cáº£m giÃ¡c lÃ  mÃ¬nh Ä‘ang chÆ¡i vá»›i nÃ³ hÆ¡n&hellip; VÃ  vá»›i code thÃ¬ dá»… customize hÆ¡n, dá»… <span class="change from">cheat</span><span class="change to"> hack</span> hÆ¡n.</p>
<p>&hellip;</p>
<p>ThÃ´i táº£n máº¡n Ä‘áº¿n Ä‘Ã¢y thÃ´i&hellip; Vá» CI/CD (cho iOS) thÃ¬ sáº½ cÃ³ nhá»¯ng bÃ i viáº¿t khÃ¡c.</p>

  <div class="entry-footer">
  
<div class="categories">
  <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>

  
  <a href="/categories/tech" class="category">tech</a>
  
</div>

  
<div class="tags">
  <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>

  
  <a href="/tags/ci" class="tag">ci</a>
  
</div>

</div>
</article>


<nav class='entry-nav'><div class='prev-entry'>
    <a href='/posts/tech/random-thoughts-on-being-a-ci-engineer/'>Random thoughts on being a CI engineer</a>
  </div><div class='next-entry'>
    <a href='/posts/tech/when-cicd-config-is-not-just-a-file-or-a-dashboard/'>When iOS CI/CD Config is not Just a File or a Dashboard</a>
  </div></nav>


<section id='comments' class='comments'>
  
  
  <div class="container">
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v5.0"></script>
<div class="share">
  <div class="fb-like" data-href="https://trinhngocthuyen.com/posts/tech/random-thoughts-on-gitlab/" data-width="" data-layout="standard" data-action="like" data-share="true"></div>
</div>

  </div>
  
  
  <div class="container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "trinhngocthuyen" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</main></body>
</html>