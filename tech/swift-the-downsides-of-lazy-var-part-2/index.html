<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Continue from the previous post, we will look into a few problems when working with lazy var&hellip;'>
<meta name='theme-color' content='#0067a7'>

<meta property='og:title' content='Swift: The downsides of lazy var (part 2) ‚Ä¢ Thuyen&#39;s corner'>
<meta property='og:description' content='Continue from the previous post, we will look into a few problems when working with lazy var&hellip;'>
<meta property='og:url' content='https://trinhngocthuyen.github.io/tech/swift-the-downsides-of-lazy-var-part-2/'>
<meta property='og:site_name' content='Thuyen&#39;s corner'>
<meta property='og:type' content='article'><meta property='article:section' content='tech'><meta property='article:tag' content='ios'><meta property='article:tag' content='swift'><meta property='article:published_time' content='2018-06-01T00:00:00Z'/><meta property='article:modified_time' content='2018-06-01T00:00:00Z'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.55.3" />

  <title>Swift: The downsides of lazy var (part 2) ‚Ä¢ Thuyen&#39;s corner</title>
  <link rel='canonical' href='https://trinhngocthuyen.github.io/tech/swift-the-downsides-of-lazy-var-part-2/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.d751652e.css'><link rel='stylesheet' href='/css/custom.css'><link rel='stylesheet' href='/css/syntax.css'><style>
:root{--color-accent:#0067a7;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-69597239-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>
<body class='page type-tech layout-post has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <h2 class='title site-title '>
      <a href='/'>
      Thuyen&#39;s corner
      </a>
    </h2>
    <div class='desc'>
    
    </div>
  </header>

</section>
<section class='widget widget-search sep-after'>
  <header>
    <h4 class='title widget-title'>Search</h4>
  </header>

  <form action='/search' id='search-form' class='search-form'>
    <label>
      <span class='screen-reader-text'>Search</span>
      <input id='search-term' class='search-term' type='search' name='q' placeholder='Search&hellip;'>
    </label></form>

</section>
<section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'>Tags</h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud no-shuffle'><li>
        <a href='/tags/algebra/' style='font-size:1em'>algebra</a>
      </li><li>
        <a href='/tags/architecture/' style='font-size:1em'>architecture</a>
      </li><li>
        <a href='/tags/astrology/' style='font-size:1em'>astrology</a>
      </li><li>
        <a href='/tags/book-review/' style='font-size:1em'>book-review</a>
      </li><li>
        <a href='/tags/brain-exercises/' style='font-size:1.1176470588235294em'>brain-exercises</a>
      </li><li>
        <a href='/tags/command-line/' style='font-size:1em'>command-line</a>
      </li><li>
        <a href='/tags/compiler/' style='font-size:1em'>compiler</a>
      </li><li>
        <a href='/tags/config/' style='font-size:1em'>config</a>
      </li><li>
        <a href='/tags/creative-thinking/' style='font-size:1.0588235294117647em'>creative-thinking</a>
      </li><li>
        <a href='/tags/decision-making/' style='font-size:1em'>decision-making</a>
      </li><li>
        <a href='/tags/expectation/' style='font-size:1em'>expectation</a>
      </li><li>
        <a href='/tags/garbage-collection/' style='font-size:1em'>garbage-collection</a>
      </li><li>
        <a href='/tags/image-processing/' style='font-size:1em'>image-processing</a>
      </li><li>
        <a href='/tags/ios/' style='font-size:2em'>ios</a>
      </li><li>
        <a href='/tags/logic/' style='font-size:1.0588235294117647em'>logic</a>
      </li><li>
        <a href='/tags/markov-chain/' style='font-size:1em'>markov-chain</a>
      </li><li>
        <a href='/tags/maths/' style='font-size:1.1764705882352942em'>maths</a>
      </li><li>
        <a href='/tags/method-dispatch/' style='font-size:1em'>method-dispatch</a>
      </li><li>
        <a href='/tags/mvvm/' style='font-size:1em'>mvvm</a>
      </li><li>
        <a href='/tags/network/' style='font-size:1em'>network</a>
      </li><li>
        <a href='/tags/neural-networks/' style='font-size:1em'>neural-networks</a>
      </li><li>
        <a href='/tags/optimization/' style='font-size:1.0588235294117647em'>optimization</a>
      </li><li>
        <a href='/tags/paradox/' style='font-size:1em'>paradox</a>
      </li><li>
        <a href='/tags/probability/' style='font-size:1.2352941176470589em'>probability</a>
      </li><li>
        <a href='/tags/problem-solving/' style='font-size:1.1176470588235294em'>problem-solving</a>
      </li><li>
        <a href='/tags/programming/' style='font-size:1.1176470588235294em'>programming</a>
      </li><li>
        <a href='/tags/psychological-efffects/' style='font-size:1em'>psychological-efffects</a>
      </li><li>
        <a href='/tags/questioning/' style='font-size:1em'>questioning</a>
      </li><li>
        <a href='/tags/reading/' style='font-size:1em'>reading</a>
      </li><li>
        <a href='/tags/reasoning/' style='font-size:1.1176470588235294em'>reasoning</a>
      </li><li>
        <a href='/tags/resolution/' style='font-size:1em'>resolution</a>
      </li><li>
        <a href='/tags/retrospection/' style='font-size:1em'>retrospection</a>
      </li><li>
        <a href='/tags/retrospective/' style='font-size:1em'>retrospective</a>
      </li><li>
        <a href='/tags/science/' style='font-size:1.0588235294117647em'>science</a>
      </li><li>
        <a href='/tags/statistics/' style='font-size:1.1764705882352942em'>statistics</a>
      </li><li>
        <a href='/tags/stub/' style='font-size:1em'>stub</a>
      </li><li>
        <a href='/tags/swift/' style='font-size:1.3529411764705883em'>swift</a>
      </li><li>
        <a href='/tags/swizzle/' style='font-size:1em'>swizzle</a>
      </li><li>
        <a href='/tags/testing/' style='font-size:1em'>testing</a>
      </li><li>
        <a href='/tags/travel/' style='font-size:1.3529411764705883em'>travel</a>
      </li><li>
        <a href='/tags/triz/' style='font-size:1.0588235294117647em'>triz</a>
      </li><li>
        <a href='/tags/ux/' style='font-size:1em'>ux</a>
      </li><li>
        <a href='/tags/xcode/' style='font-size:1em'>xcode</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/tech/'>Tech</a>
      </li><li class='item'>
        <a href='/reasoning/'>Reasoning</a>
      </li><li class='item'>
        <a href='/misc/'>Misc</a>
      </li><li class='item'>
        <a href='/reading/'>Reading</a>
      </li><li class='item'>
        <a href='/about/'>About</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'‚â´'}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/'>üè° Home</a></li><li><a href='/tech/'>Tech</a></li><li><span>Swift: The downsides of lazy var (part 2)</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Thuyen&#39;s corner</p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Swift: The downsides of lazy var (part 2)</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2018-06-01T00:00:00Z'>2018, Jun 01</time>
</span>

  
  

</div>


  </div>
</header>

  
  
<details class='container entry-toc'>
  <summary class='title'>
    <span>Table of Contents</span>
  </summary>
  <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#problems">Problems</a>
<ul>
<li><a href="#problem-1-not-working-smoothly-with-structs">Problem 1: not working smoothly with structs</a></li>
<li><a href="#problem-2-concurrency">Problem 2: concurrency</a></li>
</ul></li>
<li><a href="#benchmark">Benchmark</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</details>


  <div class='container entry-content'>
  

<p>Continue from the <a href="/tech/swift-the-downsides-of-lazy-var-part-1">previous post</a>, we will look into a few problems when working with lazy var.</p>

<h3 id="problems">Problems</h3>

<h4 id="problem-1-not-working-smoothly-with-structs">Problem 1: not working smoothly with structs</h4>

<p>Since the getter of lazy var is mutating, using it with structs sometimes requires extra work. For example, this code below does not compile:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
	<span class="kd">private</span> <span class="kr">lazy</span> <span class="kd">var</span> <span class="nv">name</span> <span class="p">=</span> <span class="s">&#34;thuyen&#34;</span>
	<span class="kd">var</span> <span class="nv">alias</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span> <span class="k">return</span> <span class="n">name</span> <span class="p">}</span> 	<span class="c1">// error: Cannot use mutating getter on immutable</span>
<span class="p">}</span></code></pre></div>
<p>To make this code work, we have to explicitly declare <code>getter</code> of <code>alias</code> as <code>mutating</code>. But personally, I would rather not make an object mutable just in order to access a specific property.</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
	<span class="kd">private</span> <span class="kr">lazy</span> <span class="kd">var</span> <span class="nv">name</span> <span class="p">=</span> <span class="s">&#34;thuyen&#34;</span>
	<span class="kd">var</span> <span class="nv">alias</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
		<span class="kr">mutating</span> <span class="kr">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">name</span> <span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>Another approach is to wrap lazy var inside a class <code>LazyBox</code>, like in <a href="https://oleb.net/blog/2015/12/lazy-properties-in-structs-swift">this article</a>. We will later use this approach as we can handle more issues such as concurrency.</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">final</span> <span class="kd">class</span> <span class="nc">LazyBox</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="kd">private</span> <span class="kd">var</span> <span class="nv">_value</span><span class="p">:</span> <span class="n">T</span><span class="p">?</span>
	<span class="kd">private</span> <span class="kd">let</span> <span class="nv">compute</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="n">T</span>
	<span class="kd">init</span><span class="p">(</span><span class="kc">_</span> <span class="n">compute</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>
		<span class="kc">self</span><span class="p">.</span><span class="n">compute</span> <span class="p">=</span> <span class="n">compute</span>
	<span class="p">}</span>

	<span class="kd">var</span> <span class="nv">value</span><span class="p">:</span> <span class="n">T</span> <span class="p">{</span>
		<span class="k">if</span> <span class="kd">let</span> <span class="nv">_value</span> <span class="p">=</span> <span class="n">_value</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="p">}</span>
		<span class="kd">let</span> <span class="nv">v</span> <span class="p">=</span> <span class="n">compute</span><span class="p">()</span>
		<span class="n">_value</span> <span class="p">=</span> <span class="n">v</span>
		<span class="k">return</span> <span class="n">v</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
	<span class="kd">private</span> <span class="kd">let</span> <span class="nv">_name</span> <span class="p">=</span> <span class="n">LazyBox</span><span class="p">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span> <span class="s">&#34;thuyen&#34;</span> <span class="p">}</span>
	<span class="kd">var</span> <span class="nv">alias</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_name</span><span class="p">.</span><span class="n">value</span> <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h4 id="problem-2-concurrency">Problem 2: concurrency</h4>

<p>Another problem is that <code>lazy var</code> is not thread-safe which means the closure can get executed multiple times due to accesses from different threads. This is also mentioned in the Apple documentation:</p>

<blockquote>
<p>If a property marked with the <code>lazy</code> modifier is accessed by multiple threads simultaneously and the property has not yet been initialized, there is no guarantee that the property will be initialized only once.</p>
</blockquote>

<p>To prevent race condition, a simple implementation is to lock every read to the value:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">final</span> <span class="kd">class</span> <span class="nc">LazyBox</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="kd">private</span> <span class="kd">let</span> <span class="nv">lock</span><span class="p">:</span> <span class="n">Synchronizing</span> <span class="p">=</span> <span class="n">NSLock</span><span class="p">()</span>
	<span class="kd">private</span> <span class="kr">lazy</span> <span class="kd">var</span> <span class="nv">_lazyValue</span><span class="p">:</span> <span class="n">T</span> <span class="p">=</span> <span class="n">compute</span><span class="p">()</span>
	<span class="p">...</span>
	<span class="kd">var</span> <span class="nv">value</span><span class="p">:</span> <span class="n">T</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">lock</span><span class="p">.</span><span class="n">sync</span> <span class="p">{</span> <span class="n">_lazyValue</span> <span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">extension</span> <span class="nc">Locking</span> <span class="p">{</span>
	<span class="kd">func</span> <span class="nf">lock</span><span class="p">()</span>
	<span class="kd">func</span> <span class="nf">unlock</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="nc">Synchronizing</span> <span class="p">{</span>
	<span class="kd">func</span> <span class="nf">sync</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">execute</span><span class="p">:</span> <span class="p">()</span> <span class="kr">throws</span> <span class="p">-&gt;</span> <span class="n">T</span><span class="p">)</span> <span class="kr">rethrows</span> <span class="p">-&gt;</span> <span class="n">T</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">Locking</span> <span class="p">{</span>
	<span class="kd">func</span> <span class="nf">sync</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">execute</span><span class="p">:</span> <span class="p">()</span> <span class="kr">throws</span> <span class="p">-&gt;</span> <span class="n">T</span><span class="p">)</span> <span class="kr">rethrows</span> <span class="p">-&gt;</span> <span class="n">T</span> <span class="p">{</span>
		<span class="k">defer</span> <span class="p">{</span> <span class="n">unlock</span><span class="p">()</span> <span class="p">}</span>
		<span class="n">lock</span><span class="p">()</span>
		<span class="k">return</span> <span class="k">try</span> <span class="n">execute</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Let&#39;s use NSLock for simplicity. Alternatives: DispatchQueue, pthread_mutex_t, semaphore...</span>
<span class="kd">extension</span> <span class="nc">NSLock</span><span class="p">:</span> <span class="n">Locking</span><span class="p">,</span> <span class="n">Synchronizing</span> <span class="p">{</span> <span class="p">}</span></code></pre></div>
<p>Now, it works as expected. However, the computation should only occur in the first read access. Locking every read will hurt performance a bit. Therefore, a better implementation is to lock the computation instead.</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">final</span> <span class="kd">class</span> <span class="nc">LazyBox</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="p">...</span>
	<span class="kd">var</span> <span class="nv">value</span><span class="p">:</span> <span class="n">T</span> <span class="p">{</span>
		<span class="k">if</span> <span class="kd">let</span> <span class="nv">_value</span> <span class="p">=</span> <span class="n">_value</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="p">}</span>
		<span class="k">return</span> <span class="n">lock</span><span class="p">.</span><span class="n">sync</span> <span class="p">{</span>
			<span class="c1">// Perform computation here</span>
			<span class="p">...</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>Note that performing computation more than once is still fine as long as they are synchronous and later computation reuses the result of previous ones.
We know for sure that in the next execution inside <code>lock.sync</code>, we definitely have <code>_value</code> computed. Then we can reuse that result, like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">final</span> <span class="kd">class</span> <span class="nc">LazyBox</span><span class="p">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
	<span class="p">...</span>
	<span class="kd">var</span> <span class="nv">value</span><span class="p">:</span> <span class="n">T</span> <span class="p">{</span>
		<span class="k">if</span> <span class="kd">let</span> <span class="nv">_value</span> <span class="p">=</span> <span class="n">_value</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="p">}</span>
		<span class="k">return</span> <span class="n">lock</span><span class="p">.</span><span class="n">sync</span> <span class="p">{</span>
			<span class="c1">// Check again if the value is already computed (from the first one get called)</span>
			<span class="k">if</span> <span class="kd">let</span> <span class="nv">_value</span> <span class="p">=</span> <span class="n">_value</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_value</span> <span class="p">}</span>
			<span class="kd">let</span> <span class="nv">v</span> <span class="p">=</span> <span class="n">compute</span><span class="p">()</span>
			<span class="n">_value</span> <span class="p">=</span> <span class="n">v</span>
			<span class="k">return</span> <span class="n">v</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h3 id="benchmark">Benchmark</h3>

<p>I ran a performance test for the two implementations (locking computation only vs. locking every read).
The result shows a significant performance gain for the former one (0.002s as compared to 0.065s). The code for the benchmark can be found <a href="https://gist.github.com/trinhngocthuyen/c51e4025658510b63f28b30596714f55">here</a>.</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='categories'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
<span class='screen-reader-text'>Categories: </span><a class='category' href='/categories/tech/'>Tech</a></div>
<div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/ios/'>ios</a> <a class='tag' href='/tags/swift/'>swift</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/tech/swift-the-downsides-of-lazy-var-part-1/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Swift: The downsides of lazy var (part 1)</a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    
    
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.3"></script>
<div class="share">
  <div class="fb-like" data-href="https://trinhngocthuyen.github.io/tech/swift-the-downsides-of-lazy-var-part-2/" data-width="" data-layout="standard" data-action="like" data-size="small" data-share="true"></div>
</div>


    
    
    <div class='comments-area'>
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "trinhngocthuyen-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
  </div>
</section>


      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/trinhngocthuyen' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/trinhngocthuyen' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:trinhngocthuyen@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/thuyen-trinh' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p></p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.69694257.js'></script>

</body>

</html>

